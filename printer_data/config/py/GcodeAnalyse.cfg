[gcode_shell_command ANALYZE_GCODE_SPEED]
command: /usr/bin/python3 /home/biqu/printer_data/config/py/GcodeMaxSpeddAnalyse.py
timeout: 5
verbose: True

[gcode_macro MAX_SPEED_DATA]
variable_value: 0.0
gcode:

[save_variables]
filename: /home/biqu/printer_data/config/saved_vars.cfg

[gcode_macro TEST_MACRO]
gcode:
  RESPOND MSG="Hola desde TEST_MACRO"

[gcode_macro GET_MAX_SPEED_SET_TMC_MODE]
gcode:
    {% if not printer.print_stats.filename %}
        RESPOND TYPE=error MSG="No hay G-code seleccionado"
        RETURN
    {% endif %}

    {% set GCODE_DIR = "/home/biqu/printer_data/gcodes" %}
    {% set gcode_path = GCODE_DIR ~ "/" ~ printer.print_stats.filename %}

    RESPOND MSG={"Analizando: " ~ gcode_path}

    RUN_SHELL_COMMAND CMD=ANALYZE_GCODE_SPEED PARAMS="{gcode_path}"

[gcode_macro SET_TMC_AUTOTUNE_PERFORMANCE]
gcode:
  M118 Motores en modo PERFORMANCE!
  AUTOTUNE_TMC STEPPER=stepper_x TUNING_GOAL=performance
  AUTOTUNE_TMC STEPPER=stepper_y TUNING_GOAL=performance

[gcode_macro SET_TMC_AUTOTUNE_PERFORMANCE]
gcode:
  M118 Motores en modo SILENT!
  AUTOTUNE_TMC STEPPER=stepper_x TUNING_GOAL=silent
  AUTOTUNE_TMC STEPPER=stepper_y TUNING_GOAL=silent

